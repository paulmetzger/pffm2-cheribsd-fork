#
# GENERIC-MORELLO -- Generic kernel configuration file for CheriBSD/Morello
#
# For more information on this file, please read the config(5) manual page,
# and/or the handbook section on Kernel Configuration Files:
#
#    https://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/kernelconfig-config.html
#
# The handbook is also available locally in /usr/share/doc/handbook
# if you've installed the doc distribution, otherwise always see the
# FreeBSD World Wide Web server (https://www.FreeBSD.org/) for the
# latest information.
#
# An exhaustive list of options and more detailed explanations of the
# device lines is also present in the ../../conf/NOTES and NOTES files.
# If you are in doubt as to the purpose or necessity of a line, check first
# in NOTES.
#
# $FreeBSD$

include GENERIC

ident		GENERIC-MORELLO

makeoptions	CPUTYPE=morello
options 	CPU_CHERI
options 	COMPAT_FREEBSD64

# Needs porting to use __USER_CAP
nooptions 	COMPAT_FREEBSD32

# DTrace doesn't work with CHERI yet
nooptions 	KDTRACE_HOOKS		# Kernel DTrace hooks

# Doesn't build with Morello LLVM
nooptions 	PAC

# DRM Support
options		COMPAT_DRMCOMPAT
device		drm
device		komeda_drm
device		panfrost
device		tda19988
device		cdns_i2c

# FDT support needed for DRM
options		FDT
options		FDT_DTB_STATIC
makeoptions	FDT_DTS_FILE=arm/morello-soc.dts

nooptions	NFSCL			# Network Filesystem Client
nooptions	NFS_ROOT		# NFS usable as /, requires NFSCL

options 	ROOTDEVNAME=\"ufs:/dev/ada0\"
